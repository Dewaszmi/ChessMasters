{% load static %}
<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <title>Student ‚Äì Szachownica</title>
    <link rel="stylesheet" href="{% static 'chess_app/lib/chessboard.css' %}" />

    <style>
      body {
      font-family: Arial;
      text-align: center;
      margin: 40px;
      background: #f4f4f4;
      }
      #feedback-panel {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 15px;
    }

      #board-container {
        margin: 40px auto;
        padding: 15px;
        background: linear-gradient(135deg, #2c3e50, #34495e);
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        width: fit-content;
      }

      #board {
        width: 480px;
        max-width: 95vw;
      }
      .top-bar {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
      align-items: center;
    }

    #back-btn {
      display: none;
      padding: 8px 16px;
      background: #666;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    #next-btn {
      padding: 10px 18px;
      font-size: 14px;
      background: #2196f3;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    #next-btn:hover {
      background: #1976d2;
    }


    .logout-link {
      color: #3b3b3b;
      text-decoration: none;
      font-weight: bold;
    }

    .logout-link:hover {
      text-decoration: underline;
    }
    #result {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
    }


    </style>
  </head>
  <body>
    <h1>Welcome, Student!</h1>

    <div id="level-menu" style="max-width: 800px; margin: 50px auto; display: flex; justify-content: center; gap: 20px;">

        <div onclick="startLevel('easy')" style="cursor: pointer; background: #e8f5e9; border: 2px solid #4caf50; padding: 20px; border-radius: 10px; width: 200px; transition: transform 0.2s;">
            <h2 style="color: #2e7d32;">üå± PoczƒÖtkujƒÖcy</h2>
            <p>Proste maty.</p>
            <button style="background: #4caf50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Start</button>
        </div>

        <div onclick="startLevel('medium')" style="cursor: pointer; background: #fff3e0; border: 2px solid #ff9800; padding: 20px; border-radius: 10px; width: 200px; transition: transform 0.2s;">
            <h2 style="color: #ef6c00;">üî• ≈öredni</h2>
            <p>Taktyka i wide≈Çki.</p>
            <button style="background: #ff9800; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Start</button>
        </div>

        <div onclick="startLevel('hard')" style="cursor: pointer; background: #ffebee; border: 2px solid #f44336; padding: 20px; border-radius: 10px; width: 200px; transition: transform 0.2s;">
            <h2 style="color: #c62828;">üíÄ HACKER</h2>
            <p>Zaawansowane kombinacje.</p>
            <button style="background: #f44336; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Start</button>
        </div>

    </div>
   <div class="top-bar">
    <button id="back-btn" onclick="showMenu()" style="display: none;">‚Üê Wr√≥ƒá do menu</button>
    <a href="{% url 'logout' %}" class="logout-link">Logout</a>
    </div>
    <div id="game-container" style="display: none;">
        <h2 id="task-counter"></h2>
        <div id="board-container">
          <div id="board"></div>
        </div>
        <div style="max-width: 480px; margin: 20px auto; text-align: left">
        <div id="feedback-panel">
          <p id="result"></p>

          <button id="next-btn" onclick="nextTask()">
             Nastƒôpne zadanie ‚ñ∂
          </button>
        </div>


        </div>
    </div>

    <div id="stats-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="background: white; margin: 15% auto; padding: 20px; width: 300px; text-align: center; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">

            <h2>Podsumowanie serii</h2>

            <p>Tw√≥j wynik: <strong id="modal-correct-count" style="color: green; font-size: 1.2em;">0</strong> / 5</p>

            <p>≈öredni czas na zadanie: <strong id="modal-avg-time">0</strong> s</p>

            <button onclick="closeStats()" style="padding: 10px 20px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 4px;">Dalej</button>

        </div>
    </div>

    <script src="{% static 'chess_app/lib/jquery-3.7.1.min.js' %}"></script>
    <script src="{% static 'chess_app/lib/chess.min.js' %}"></script>
    <script src="{% static 'chess_app/lib/chessboard.js' %}"></script>

    <script>
      window.POSITIONS = {{ positions_json|safe }};
    </script>

    <script src="{% static 'chess_app/js/student.js' %}"></script>

  </body>
</html>
